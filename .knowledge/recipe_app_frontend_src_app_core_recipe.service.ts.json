{"is_source_file": true, "format": "TypeScript", "description": "This file defines an Angular service named RecipeService responsible for fetching recipe data either from a backend API or from mock data. It provides methods to list recipes with optional filtering and to retrieve individual recipes by id.", "external_files": ["./recipe.model", "./recipes.mock", "@angular/core", "@angular/common/http", "rxjs"], "external_methods": ["HttpClient.get", "Observable.of", "Observable.pipe", "delay", "map"], "published": ["RecipeService", "RecipeQuery"], "classes": [{"name": "RecipeService", "description": "An Angular service that provides recipe data fetching functionality, supporting both HTTP backend calls and mock data for development or testing."}], "methods": [{"name": "listRecipes", "description": "Fetches a list of recipes, optionally filtered by search term and tags. Uses HTTP if apiBase is configured; otherwise, returns filtered mock data with a simulated delay."}, {"name": "getRecipe", "description": "Retrieves a single recipe by its ID, either via HTTP or from the mock dataset."}], "calls": ["this.http.get", "globalThis.NG_APP_API_BASE", "globalThis.NG_APP_BACKEND_URL", "process.env.NG_APP_API_BASE", "process.env.NG_APP_BACKEND_URL", "new URLSearchParams()", "encodeURIComponent", "MOCK_RECIPES.filter", "MOCK_RECIPES.find", "of", "delay"], "search-terms": ["RecipeService", "listRecipes", "getRecipe", "mock data", "API base URL", "Angular HTTP", "recipe filtering"], "state": 2, "file_id": 24, "knowledge_revision": 68, "git_revision": "", "revision_history": [{"55": ""}, {"68": ""}], "ctags": [{"_type": "tag", "name": "$", "path": "/home/kavia/workspace/code-generation/recipe-explorer-192480-192489/recipe_app_frontend/src/app/core/recipe.service.ts", "pattern": "/^      const url = `${base}\\/recipes${qs ? `?${qs}` : ''}`;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "RecipeQuery", "path": "/home/kavia/workspace/code-generation/recipe-explorer-192480-192489/recipe_app_frontend/src/app/core/recipe.service.ts", "pattern": "/^export interface RecipeQuery {$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "RecipeService", "path": "/home/kavia/workspace/code-generation/recipe-explorer-192480-192489/recipe_app_frontend/src/app/core/recipe.service.ts", "pattern": "/^export class RecipeService {$/", "language": "TypeScript", "kind": "class"}, {"_type": "tag", "name": "USP", "path": "/home/kavia/workspace/code-generation/recipe-explorer-192480-192489/recipe_app_frontend/src/app/core/recipe.service.ts", "pattern": "/^      const USP: any = (typeof globalThis !== 'undefined' && (globalThis as any).URLSearchParams/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/recipe-explorer-192480-192489/recipe_app_frontend/src/app/core/recipe.service.ts", "pattern": "/^      const base = this.apiBase?.replace(\\/\\\\\\/+$\\/, '') ?? '';$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "filtered", "path": "/home/kavia/workspace/code-generation/recipe-explorer-192480-192489/recipe_app_frontend/src/app/core/recipe.service.ts", "pattern": "/^    const filtered = MOCK_RECIPES.filter(r => {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "fromProcess", "path": "/home/kavia/workspace/code-generation/recipe-explorer-192480-192489/recipe_app_frontend/src/app/core/recipe.service.ts", "pattern": "/^    const fromProcess = (typeof process !== 'undefined' && (process as any)?.env) ? ((process as/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "fromWindow", "path": "/home/kavia/workspace/code-generation/recipe-explorer-192480-192489/recipe_app_frontend/src/app/core/recipe.service.ts", "pattern": "/^    const fromWindow = (win.NG_APP_API_BASE || win.NG_APP_BACKEND_URL) as string | undefined;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "http", "path": "/home/kavia/workspace/code-generation/recipe-explorer-192480-192489/recipe_app_frontend/src/app/core/recipe.service.ts", "pattern": "/^  private http = inject(HttpClient);$/", "language": "TypeScript", "kind": "property", "scope": "RecipeService", "scopeKind": "class"}, {"_type": "tag", "name": "matchTags", "path": "/home/kavia/workspace/code-generation/recipe-explorer-192480-192489/recipe_app_frontend/src/app/core/recipe.service.ts", "pattern": "/^      const matchTags = tags.length === 0 || (r.tags ?? []).some(t => tags.includes(t));$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "q", "path": "/home/kavia/workspace/code-generation/recipe-explorer-192480-192489/recipe_app_frontend/src/app/core/recipe.service.ts", "pattern": "/^      const q = new USP();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "qs", "path": "/home/kavia/workspace/code-generation/recipe-explorer-192480-192489/recipe_app_frontend/src/app/core/recipe.service.ts", "pattern": "/^      const qs = q.toString();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "qs", "path": "/home/kavia/workspace/code-generation/recipe-explorer-192480-192489/recipe_app_frontend/src/app/core/recipe.service.ts", "pattern": "/^      const url = `${base}\\/recipes${qs ? `?${qs}` : ''}`;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "recipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-192480-192489/recipe_app_frontend/src/app/core/recipe.service.ts", "pattern": "/^    const recipe = MOCK_RECIPES.find(r => r.id === id);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "search", "path": "/home/kavia/workspace/code-generation/recipe-explorer-192480-192489/recipe_app_frontend/src/app/core/recipe.service.ts", "pattern": "/^  search?: string;$/", "language": "TypeScript", "kind": "property", "scope": "RecipeQuery", "scopeKind": "interface"}, {"_type": "tag", "name": "tags", "path": "/home/kavia/workspace/code-generation/recipe-explorer-192480-192489/recipe_app_frontend/src/app/core/recipe.service.ts", "pattern": "/^    const tags = query?.tags ?? [];$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "tags", "path": "/home/kavia/workspace/code-generation/recipe-explorer-192480-192489/recipe_app_frontend/src/app/core/recipe.service.ts", "pattern": "/^  tags?: string[];$/", "language": "TypeScript", "kind": "property", "scope": "RecipeQuery", "scopeKind": "interface"}, {"_type": "tag", "name": "term", "path": "/home/kavia/workspace/code-generation/recipe-explorer-192480-192489/recipe_app_frontend/src/app/core/recipe.service.ts", "pattern": "/^    const term = (query?.search ?? '').toLowerCase().trim();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/recipe-explorer-192480-192489/recipe_app_frontend/src/app/core/recipe.service.ts", "pattern": "/^      const url = `${base}\\/recipes${qs ? `?${qs}` : ''}`;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/recipe-explorer-192480-192489/recipe_app_frontend/src/app/core/recipe.service.ts", "pattern": "/^      const url = `${this.apiBase}\\/recipes\\/${encodeURIComponent(id)}`;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "win", "path": "/home/kavia/workspace/code-generation/recipe-explorer-192480-192489/recipe_app_frontend/src/app/core/recipe.service.ts", "pattern": "/^    const win = globalThis as any;$/", "language": "TypeScript", "kind": "constant"}], "hash": "40b86e76e99c96f6e68001d516b2400d", "format-version": 4, "code-base-name": "recipe_app_frontend", "filename": "recipe_app_frontend/src/app/core/recipe.service.ts", "fields": [{"name": "export interface RecipeQuery {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "private http = inject(HttpClient);", "scope": "RecipeService", "scopeKind": "class", "description": "unavailable"}, {"name": "search?: string;", "scope": "RecipeQuery", "scopeKind": "interface", "description": "unavailable"}, {"name": "tags?: string[];", "scope": "RecipeQuery", "scopeKind": "interface", "description": "unavailable"}]}